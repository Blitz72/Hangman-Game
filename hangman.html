<!DOCTYPE html>
<html>

	<head>
		<title>Hangman | by David Bauer</title>

		<link rel="stylesheet" type="text/css" href="assets/css/reset.css">
		<link rel="stylesheet" type="text/css" href="assets/css/style.css">
		<link href="https://fonts.googleapis.com/css?family=Share+Tech+Mono" rel="stylesheet">
	</head>

	<body>
		<!-- <div class="center"></div> -->
		<div class="header sans-serif wrapper">
			<h1>Star Wars Hangman</h1>
		</div>
		<div class="sans-serif wrapper" id="word"></div>
		<div class="sans-serif wrapper" id="lives"></div>
		<button class="sans-serif wrapper" id="reset">Reset</button>
		<button class="sans-serif wrapper" id="hint">Hint</button>


		<script type="text/javascript">

			var words = ["STAR WARS", "JABBA THE HUTT", "DARTH VADER", "BOBA FETT", "LUKE SKYWALKER", "PRINCESS LEIA", "HAN SOLO", "DEATH STAR", "CHEWBACCA", "LIGHTSABER", "YODA"];

			var hints = ["Best... Movie... Ever...", "Crime does pay", "Heavy breather", "Watch out for that Sarlacc!", "Really just wants to go to Tosche Station", "Does anyone else feel the need for a Cinnabon?", "FREEZE!", "this \!\= moon\;", "Fuzzball", "Pure elegance", "sizeOf\(this\) \!\= judgement\;"];

			var alphabet = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "Y", "Z"];

			var userGuess = "";
			var lettersGuessed = [];
			var guessedWord = "";
			var lives = 10;
			var space = 0;
			var counter = 0;

			var wordDiv = document.getElementById("word");
			var livesDiv = document.getElementById("lives");

			var wordIndexer = 0;// = Math.floor((Math.random() * (words.length)));
			var currentWord = "";// = words[wordIndexer];
			//console.log(currentWord);

			// for (var i = 0; i < currentWord.length; i++) {
			// 	if (currentWord[i] == " ") {
			// 		guessedWord += " ";
			// 	} else {
			// 		guessedWord += "_";
			// 	}
			// }

			function resetGame() {
				userGuess = "";
				guessedWord = "";
				lettersGuessed = [];
				lives = 10;
				space = 0;
				counter = 0;
				wordIndexer = Math.floor((Math.random() * (words.length)));
				currentWord = words[wordIndexer];
				console.log(currentWord);
				for (var i = 0; i < currentWord.length; i++) {
					if (currentWord[i] == " ") {
						guessedWord += " ";
					} else {
						guessedWord += "_";
					}
				}
				update();
			}

			resetGame();

			function updateString() {
				guessedWord = "";
				space = 0;
				counter = 0;
				// console.log("cleared guessedWord: " + guessedWord);
				var letter;
				for (var i = 0; i < currentWord.length; i++) {
					console.log("currentWord[i] = " + currentWord[i]);
					if (currentWord[i] == " ") {
						letter = " ";
						space++;
					} else if (alphabet.indexOf(currentWord[i]) >= 0) {
						for (var j = 0; j < lettersGuessed.length; j++) {
							if (currentWord[i] == lettersGuessed[j]) {
								console.log("letter matches");
								letter = currentWord[i];
								counter++;
								// break;
							}
						}
					} else {
						letter = "_";
					}
					guessedWord += letter;
				}
				
				console.log("guessedWord: " + guessedWord);
				// guessedWord += letter;
				if (currentWord.indexOf(userGuess) == -1) {
					lives--;
					console.log("lives: " + lives);
				}
				if ((space + counter) == currentWord.length) {
					livesDiv.innerHTML = ("You win!");
				}
				console.log(counter + space);
				console.log("length: " + currentWord.length);
			}

			// function check(guess) {
			// 	for (var j = 0; j < currentWord.length; j++) {
			// 		var letter = currentWord.charAt(j);
			// 		if (currentWord[j] == guess) {
			// 			console.log(letter);
			// 			console.log("letter matches");
			// 			updateString(j, guess);
			// 			// guessedWord.replaceAt(j, guess) = guess;
			// 			console.log(guessedWord);
			// 		}
			// 	}
			// 	console.log(guessedWord);
			// }

			function update() {
				wordDiv.innerHTML = "";
				for (var i = 0; i < currentWord.length; i++) {
					if (guessedWord[i] == " ") {
						wordDiv.innerHTML += "  -  ";
					} else if (guessedWord[i] == currentWord[i]) {
						wordDiv.innerHTML += currentWord[i] + " ";
					} else {
						wordDiv.innerHTML += "_ ";
					}	
				}
				if (lives > 0) {
					livesDiv.innerHTML = ("You have " + lives + " lives!");
				} else {
					livesDiv.innerHTML = ("You have failed me for the last time!");
				}
				
			}

			update();

			document.onkeyup = function(event) {
				if (lives > 0) {
					userGuess = String.fromCharCode(event.keyCode).toUpperCase();
					if (alphabet.indexOf(userGuess) !== -1) {
						userGuess = userGuess;
						console.log("you picked a letter!")
					} else {
						livesDiv.innerHTML = ("Please enter a letter!");
						return;
					}
					if (lettersGuessed.indexOf(userGuess) >= 0) {
						livesDiv.innerHTML = ("Dude, you already guessed that letter!");
						return;
					}
					// console.log("letter guessed: " + userGuess);
					lettersGuessed.push(userGuess);
					console.log(lettersGuessed);
					updateString();
					update();
				}
			}

			document.getElementById('reset').onclick = function() {
 		    	resetGame();
 		    	console.log("game reset!");
  			}

  			document.getElementById('hint').onclick = function() {
 		    	livesDiv.innerHTML = (hints[wordIndexer]);
  			}

		</script>
	</body>
</html>